"use strict";(self.webpackChunkweaco=self.webpackChunkweaco||[]).push([[36],{5036:function(e,t,n){n.r(t);var r=n(5861),a=n(9439),c=n(7757),o=n.n(c),s=n(1095),i=n(2964),u=n(7313),l=n(4766),d=n(6417);t.default=function(){var e=(0,u.useState)(""),t=(0,a.Z)(e,2),n=t[0],c=t[1],p=(0,u.useState)(""),h=(0,a.Z)(p,2),f=h[0],g=h[1],m=(0,u.useState)(""),w=(0,a.Z)(m,2),x=w[0],v=w[1],y=(0,u.useState)(300),b=(0,a.Z)(y,2),j=b[0],k=b[1],U=(0,u.useState)(300),Z=(0,a.Z)(U,2),R=Z[0],C=Z[1],I="S9nPnnJhejVZ2HJsVVmYaTxTB732",L="Vf46gZOvLVagkCQbvZxSqXyjrDu1",B=s.Hw.ref();function S(){return(S=(0,r.Z)(o().mark((function e(t,n){var r,a,c,s,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\uc774\ubbf8\uc9c0 \ud638\ucd9c : ".concat(n)),e.next=3,fetch(t,{method:"get"});case 3:return r=e.sent,e.next=6,r.blob();case 6:return a=e.sent,c="".concat(n,".jpg"),e.t0=URL,e.next=11,a;case 11:e.t1=e.sent,s=e.t0.createObjectURL.call(e.t0,e.t1),(i=document.createElement("a")).href=s,i.download=c,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(t);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return D.apply(this,arguments)}function D(){return D=(0,r.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,n=[],e.next=4,new Promise((function(e){s.wO.collection("items").where("creatorId","==","S9nPnnJhejVZ2HJsVVmYaTxTB732").where("date",">=",f).where("date","<=",x).orderBy("date","desc").get().then((function(r){r.docs.forEach((function(e){t++,n.push({num:t,id:e.id,date:e.data().date,url:e.data().attachmentUrl,thumbnailUrl:e.data().thumbnailUrl})})),e(n)})).catch((function(e){console.log("Error getting documents: ",e)}))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}var E=function(){var e=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("========= \uc774\ubbf8\uc9c0 \uc555\ucd95\uc2dc\uc791"),e.next=3,V();case 3:t=e.sent,console.log("\uc804\uccb4 \uc544\uc774\ud15c: ",t),t.forEach(function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("\uc5c5\ub370\uc774\ud2b8 \ud638\ucd9c \uc2dc\uc791: ",t),O(t.id,t.url,t.thumbnailUrl);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function O(e,t,n){return H.apply(this,arguments)}function H(){return(H=(0,r.Z)(o().mark((function e(t,n,r){var a,i,u,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Hw.refFromURL(n);case 2:if(a=e.sent,i="",""===r||void 0===r){e.next=8;break}return e.next=7,s.Hw.refFromURL(r);case 7:i=e.sent;case 8:return a.name.indexOf(".")>0&&(u=a.name.split("."),c(u[u.length-1])),e.next=11,fetch(n,{method:"get"});case 11:return l=e.sent,e.next=14,l.blob();case 14:_(e.sent,a.name,i.name,t);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t,n,r){return F.apply(this,arguments)}function F(){return(F=(0,r.Z)(o().mark((function e(t,r,a,c){var s,u,d,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("originalFile size ".concat(t.size/1024/1024," MB")),console.log("\uc6d0\ubcf8 \ud30c\uc77c \uc774\ub984: ",r),s={maxSizeMB:1,maxWidthOrHeight:1e3,useWebWorker:!0,initialQuality:.7},e.prev=3,e.next=6,(0,i.Z)(t,s);case 6:return u=e.sent,console.log("compressedFile size ".concat(u.size/1024/1024," MB")),e.next=10,P(u);case 10:return d=e.sent,console.log("\uc378\ub124\uc77c \ud30c\uc77c: ",d),e.next=14,Promise.all([B.child("".concat(I,"/").concat(r)).delete().then((function(){console.log(r+" 1\ucc28 \uc0ad\uc81c \uc644\ub8cc")})).catch((function(e){console.log("1\ucc28 \uc0ad\uc81c \uc2e4\ud328: ",e),B.child("".concat(L,"/").concat(r)).delete().then((function(){console.log(r+" 2\ucc28 \uc0ad\uc81c \uc644\ub8cc")})).catch((function(e){console.log("2\ucc28 \uc0ad\uc81c \uc2e4\ud328: ",e)}))})),B.child("thumbnails/".concat(a)).delete().then((function(){console.log(a+" \uc378\ub124\uc77c \uc0ad\uc81c \uc644\ub8cc")})).catch((function(e){console.log("\uc378\ub124\uc77c \uc0ad\uc81c \uc2e4\ud328: ",e)})),B.child("".concat(I,"/").concat((0,l.k$)()).concat(n?"."+n:".jpg")).put(u).then((function(e){return e.ref.getDownloadURL()})).catch((function(e){console.log("\uc7ac\uc5c5\ub85c\ub4dc \uc2e4\ud328: ",e)})),B.child("thumbnails/".concat((0,l.k$)(),".webp")).put(d).then((function(e){return e.ref.getDownloadURL()})).catch((function(e){console.log("\uc378\ub124\uc77c \uc7ac\uc5c5\ub85c\ub4dc \uc2e4\ud328: ",e)}))]);case 14:p=e.sent,console.log(p),J(c,p[2],p[3]),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[3,19]])})))).apply(this,arguments)}function P(e){return T.apply(this,arguments)}function T(){return(T=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FileReader,e.next=3,new Promise((function(e){n.onloadend=function(t){var n=t.currentTarget.result,r=new Image;r.src=n,r.onload=function(){var t=document.createElement("canvas");t.width=300,t.height=300,t.getContext("2d").drawImage(r,0,0,300,300),t.toBlob((function(t){e(t)}),"image/webp",.7)}},n.readAsDataURL(t)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t,n){return N.apply(this,arguments)}function N(){return(N=(0,r.Z)(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.wO.doc("items/".concat(t)).update({attachmentUrl:n,thumbnailUrl:r}),console.log("======== \uc5c5\ub370\uc774\ud2b8 \uc644\ub8cc. \ubcc0\uacbd \ud30c\uc77c URL: ",n,r);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=function(){var e=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("========= \uc378\ub124\uc77c \uc774\ubbf8\uc9c0 \ucd94\uac00\ud558\uae30 \uc2dc\uc791"),e.next=3,V();case 3:t=e.sent,console.log("\uc804\uccb4 \uc544\uc774\ud15c: ",t),t.forEach(function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("\uc5c5\ub370\uc774\ud2b8 \ud638\ucd9c \uc2dc\uc791: ",t),t.thumbnailUrl||A(t.id,t.url);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function A(e,t){return M.apply(this,arguments)}function M(){return(M=(0,r.Z)(o().mark((function e(t,n){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Hw.refFromURL(n);case 2:return r=e.sent,e.next=5,fetch(n,{method:"get"});case 5:return a=e.sent,e.next=8,a.blob();case 8:W(e.sent,r.name,t);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t,n){return Y.apply(this,arguments)}function Y(){return(Y=(0,r.Z)(o().mark((function e(t,n,r){var a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("\uc6d0\ubcf8 \ud30c\uc77c \uc774\ub984: ",n),e.prev=1,e.next=4,P(t);case 4:return a=e.sent,console.log("\uc378\ub124\uc77c \ud30c\uc77c: ",a),e.next=8,new Promise((function(e){B.child("thumbnails/".concat((0,l.k$)(),".webp")).put(a).then((function(t){e(t.ref.getDownloadURL())})).catch((function(e){console.log("\uc378\ub124\uc77c \uc7ac\uc5c5\ub85c\ub4dc \uc2e4\ud328: ",e)}))}));case 8:c=e.sent,$(r,c),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function $(e,t){return Q.apply(this,arguments)}function Q(){return(Q=(0,r.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.wO.doc("items/".concat(t)).update({thumbnailUrl:n}),console.log("======== \uc5c5\ub370\uc774\ud2b8 \uc644\ub8cc. \ubcc0\uacbd \ud30c\uc77c URL: ",n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,d.jsx)("section",{className:"wrapContainer dark",children:(0,d.jsxs)("div",{className:"container",style:{color:"white"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:20},children:[(0,d.jsxs)("div",{style:{margin:10},children:["\uc2dc\uc791\uc77c ",(0,d.jsx)("input",{type:"date",onChange:function(e){g(e.target.value)},style:{padding:10,margin:10}})]}),(0,d.jsx)("p",{children:"~"}),(0,d.jsxs)("div",{children:["\uc885\ub8cc\uc77c ",(0,d.jsx)("input",{type:"date",onChange:function(e){v(e.target.value)},style:{padding:10,margin:10}})]})]}),(0,d.jsxs)("div",{style:{display:"flex",gap:30,justifyContent:"center",alignItems:"flex-start",textAlign:"center"},children:[(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:50},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{style:{marginBottom:0},children:"\uae30\uac04\ubcc4 \uc774\ubbf8\uc9c0 \uc555\ucd95\ud558\uae30"}),(0,d.jsx)("input",{type:"button",className:"factoryInput__arrow",onClick:E,value:"Start"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{style:{marginBottom:0},children:"\uae30\uac04\ubcc4 \uc378\ub124\uc77c\ub9cc \ucd94\uac00\ud558\uae30"}),(0,d.jsx)("input",{type:"button",className:"factoryInput__arrow",onClick:z,value:"Start"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{style:{marginBottom:0},children:"\uae30\uac04\ubcc4 \uc774\ubbf8\uc9c0 \ub2e4\uc6b4\ub85c\ub4dc"}),(0,d.jsx)("input",{type:"button",className:"factoryInput__arrow",onClick:function(){console.log("\uc774\ubbf8\uc9c0 \ub2e4\uc6b4\ub85c\ub4dc \uc2dc\uc791"),s.wO.collection("items").where("creatorId","==","S9nPnnJhejVZ2HJsVVmYaTxTB732").where("date",">=",f).where("date","<=",x).orderBy("date","desc").get().then((function(e){console.log("\uc774\ubbf8\uc9c0 \uac2f\uc218: ",e.docs.length),e.docs.forEach((function(e){!function(e,t){S.apply(this,arguments)}(e.data().attachmentUrl,e.data().date)}))}))},value:"Download"})]})]}),(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:10},children:[(0,d.jsx)("h2",{children:"\uc378\ub124\uc77c \uc774\ubbf8\uc9c0 \ub9cc\ub4e4\uae30"}),(0,d.jsxs)("div",{children:["width ",(0,d.jsx)("input",{type:"number",onChange:function(e){k(e.target.value)},style:{width:100,padding:10,borderRadius:5,marginRight:10}}),"height ",(0,d.jsx)("input",{type:"number",onChange:function(e){C(e.target.value)},style:{width:100,padding:10,borderRadius:5}})]}),(0,d.jsx)("input",{type:"file",id:"origin-image",style:{width:290,color:"#333",backgroundColor:"white",padding:10,borderRadius:5}}),(0,d.jsx)("input",{type:"button",className:"factoryInput__arrow",onClick:function(){console.log("========= \uc378\ub124\uc77c \uc774\ubbf8\uc9c0 \ub9cc\ub4e4\uae30 \uc2dc\uc791"),function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(e){var n=new Image;n.width=j,n.height=R,n.title="thumbnail",n.src=t.result,n.onload=function(){var e=document.createElement("canvas");e.width=j,e.height=R,e.getContext("2d").drawImage(n,0,0,j,R);var t=e.toDataURL("image/webp",.7),r=new Image;r.src=t,document.getElementById("thumbnail").appendChild(r)}}}(document.getElementById("origin-image").files[0])},value:"Create"}),(0,d.jsx)("div",{id:"thumbnail"})]})]})]})})}}}]);
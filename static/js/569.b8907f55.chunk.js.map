{"version":3,"file":"static/js/569.b8907f55.chunk.js","mappings":"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","sources":["components/ItemsFactory.js","components/ItemsFactoryEdit.js","routes/Write.js"],"sourcesContent":["import { dbService, storageService } from \"fbase\";\nimport { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlus, faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { CKEditor } from \"@ckeditor/ckeditor5-react\";\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\nimport imageCompression from 'browser-image-compression';\n\nconst ItemFactory = ({ userObj }) => {\n  let today = new Date();\n  const offset = today.getTimezoneOffset();\n  today = new Date(today.getTime() - offset * 60 * 1000);\n  const defaultToday = today.toISOString().split(\"T\")[0];\n\n  useEffect(() => {\n    setDate(defaultToday);\n  }, []);\n\n  const navigate = useNavigate();\n  const [title, setTitle] = useState(\"오늘의 날씨와 경제\");\n  const [date, setDate] = useState(\"\");\n  const [low, setLow] = useState(\"\");\n  const [high, setHigh] = useState(\"\");\n  const [item, setItem] = useState(\"\");\n  const [tags, setTags] = useState([]);\n  const [attachment, setAttachment] = useState(\"\");\n  const [thumbnail, setThumbnail] = useState(\"\");\n  const [ext, setExt] = useState(\"\");\n\n  const onTitleChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    setTitle(value);\n  };\n  const onDateChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    setDate(value);\n  };\n  const onLowChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    setLow(value);\n  };\n  const onHighChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    setHigh(value);\n  };\n  const onSubmit = async (event) => {\n    if (item === \"\") {\n      return;\n    }\n    event.preventDefault();\n    let attachmentUrl = \"\";\n    let thumbnailUrl = \"\";\n    if (attachment !== \"\") {\n      const attachmentRef = storageService\n        .ref()\n        .child(`${userObj.uid}/${uuidv4()}${ext ? '.'+ext : '.jpg'}`);\n      const response = await attachmentRef.putString(attachment, \"data_url\");\n      attachmentUrl = await response.ref.getDownloadURL();\n    }\n    if (thumbnail !== \"\") {\n      const thumbnailRef = storageService\n        .ref()\n        .child(`thumbnails/${uuidv4()}.webp`);\n      const response = await thumbnailRef.putString(thumbnail, \"data_url\");\n      thumbnailUrl = await response.ref.getDownloadURL();\n    }\n    const itemObj = {\n      title: title,\n      date: date,\n      lowestTemp: low,\n      highestTemp: high,\n      text: item,\n      tags: tags,\n      createdAt: today.toISOString(),\n      creatorId: userObj.uid,\n      attachmentUrl,\n      thumbnailUrl,\n    };\n    const docRef = await dbService.collection(\"items\").add(itemObj);\n    alert(\"등록 완료!\");\n    navigate(`/${docRef.id}`);\n  };\n  \n  const onClearAttachment = () => setAttachment(\"\");\n\n  async function handleImageUpload(event) {\n\n    let imageFile = event.target.files[0];\n    console.log(`originalFile size ${imageFile.size / 1024 / 1024} MB`);\n    if (imageFile.name.indexOf('.') > 0) {\n      let ext = imageFile.name.split('.');\n      setExt(ext[ext.length - 1]);\n    } \n\n    const options = {\n      maxSizeMB: 1,\n      maxWidthOrHeight: 1000,\n      useWebWorker: true,\n      initialQuality: 0.7\n    }\n    try {\n      const compressedFile = await imageCompression(imageFile, options);\n      console.log(`compressedFile size ${compressedFile.size / 1024 / 1024} MB`);\n      const reader = new FileReader();\n      reader.onloadend = (finishedEvent) => {\n        const {\n          currentTarget: { result },\n        } = finishedEvent;\n        setAttachment(result);\n        \n        console.log('Create Thumbnail');\n        const width = 300;\n        const height = 300;\n        const image = new Image();\n        image.width = width;\n        image.height = height;\n        image.title = 'thumbnail';\n        image.src = result;\n\n        image.onload = function () {\n          const canvas = document.createElement(\"canvas\");\n          canvas.width = width;\n          canvas.height = height;\n          canvas.getContext(\"2d\").drawImage(image, 0, 0, width, height);\n          const dataUri = canvas.toDataURL(\"image/webp\", 0.7);\n          setThumbnail(dataUri);\n          const thumb = new Image();\n          thumb.src=dataUri;\n          document.getElementById('thumbnail').appendChild(thumb);\n        }\n      };\n      reader.readAsDataURL(compressedFile);\n    } catch (error) {\n      console.log(error);\n    }\n  \n  }\n\n  const onClickTags = () => {\n    if (item === \"\") return;\n    const start = item.indexOf(\"#\");\n    const tagsOriginal = item.substring(start);\n    const result = splitTags(tagsOriginal);\n    setTags(result);\n  };\n\n  function splitTags(tagsString) {\n    let result = tagsString.replaceAll(\"<p>\", \"\");\n    result = result.replaceAll(\"</p>\", \"\");\n    result = result.replaceAll(\"#\", \"\");\n    result = result.split(\" \");\n    return result;\n  }\n\n  return (\n    <form onSubmit={onSubmit} className=\"factoryForm\">\n      <div className=\"factoryInput__container\">\n        <div className=\"factoryInput__title\">\n          <input\n            className=\"factoryInput__Input\"\n            value={title}\n            onChange={onTitleChange}\n            type=\"text\"\n          />\n          <input\n            className=\"factoryInput__Input\"\n            value={date.length > 0 ? date : `${defaultToday}`}\n            onChange={onDateChange}\n            type=\"date\"\n          />\n          <input\n            className=\"factoryInput__Input\"\n            value={low}\n            placeholder=\"최저기온\"\n            onChange={onLowChange}\n            type=\"number\"\n          />\n          <input\n            className=\"factoryInput__Input\"\n            value={high}\n            placeholder=\"최고기온\"\n            onChange={onHighChange}\n            type=\"number\"\n          />\n        </div>\n        <CKEditor\n          editor={ClassicEditor}\n          data=\"\"\n          onChange={(event, editor) => {\n            const data = editor.getData();\n            setItem(data);\n          }}\n        />\n        <div className=\"factoryInput__tag\">\n          <input\n            className=\"commonBtn formBtn\"\n            onClick={onClickTags}\n            value=\"Tag 불러오기\"\n            type=\"button\"\n          />\n          {tags.map((tag) => (\n            <span className=\"formBtn tagBtn\">{tag}</span>\n          ))}\n        </div>\n        <div className=\"submitBtns\">\n          <input\n            id=\"news-submit\"\n            type=\"submit\"\n            value=\"&rarr;\"\n            style={{ opacity: 0 }}\n          />\n          <label htmlFor=\"news-submit\" className=\"factoryInput__arrow\">\n            등록\n          </label>\n        </div>\n      </div>\n      <label htmlFor=\"attach-file\" className=\"factoryInput__label\">\n        <span>사진 첨부</span>\n        <FontAwesomeIcon icon={faPlus} />\n      </label>\n      <input\n        id=\"attach-file\"\n        type=\"file\"\n        accept=\"image/*\"\n        onChange={handleImageUpload}\n        style={{ opacity: 0 }}\n      />\n      {attachment && (\n        <div className=\"factoryForm__attachment\">\n          <img\n            src={attachment}\n            style={{ backgroundImage: attachment }}\n            alt={title}\n          />\n          <div className=\"factoryForm__clear\" onClick={onClearAttachment}>\n            <span>사진 삭제</span>\n            <FontAwesomeIcon icon={faTimes} />\n          </div>\n          <div id=\"thumbnail\"></div>\n        </div>\n      )}\n    </form>\n  );\n};\n\nexport default ItemFactory;\n","import { dbService, storageService } from \"fbase\";\nimport { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlus, faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { CKEditor } from \"@ckeditor/ckeditor5-react\";\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\nimport imageCompression from 'browser-image-compression';\n\nconst ItemFactoryEdit = ({ userObj, itemId }) => {\n  const navigate = useNavigate();\n  const [title, setTitle] = useState(\"\");\n  const [date, setDate] = useState(\"\");\n  const [low, setLow] = useState(\"\");\n  const [high, setHigh] = useState(\"\");\n  const [item, setItem] = useState(\"\");\n  const [tags, setTags] = useState([]);\n  const [attachment, setAttachment] = useState(\"\");\n  const [thumbnail, setThumbnail] = useState(\"\");\n  const [itemObj, setItemObj] = useState(\"\");\n  const [ext, setExt] = useState(\"\");\n\n  useEffect(() => {\n    dbService\n      .doc(`items/${itemId}`)\n      .get()\n      .then((doc) => {\n        const data = doc.data();\n        setTitle(data.title);\n        setItem(data.text);\n        setDate(data.date);\n        setLow(data.lowestTemp);\n        setHigh(data.highestTemp);\n        setTags(data.tags);\n        setItemObj(data);\n      });\n  }, []);\n\n  const onTitleChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    setTitle(value);\n  };\n  const onDateChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    setDate(value);\n  };\n  const onLowChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    setLow(value);\n  };\n  const onHighChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    setHigh(value);\n  };\n  const onSubmit = async (event) => {\n    if (item === \"\") return alert(\"내용을 입력해 주세요\");\n\n    event.preventDefault();\n    let attachmentUrl = \"\";\n    let thumbnailUrl = \"\";\n    if (attachment !== \"\") {\n      const attachmentRef = storageService\n        .ref()\n        .child(`${userObj.uid}/${uuidv4()}${ext ? '.'+ext : '.jpg'}`);\n      const response = await attachmentRef.putString(attachment, \"data_url\");\n      attachmentUrl = await response.ref.getDownloadURL();\n    } else {\n      attachmentUrl = itemObj.attachmentUrl;\n    }\n    if (thumbnail !== \"\") {\n      const thumbnailRef = storageService\n        .ref()\n        .child(`thumbnails/${uuidv4()}.webp`);\n      const response = await thumbnailRef.putString(thumbnail, \"data_url\");\n      thumbnailUrl = await response.ref.getDownloadURL();\n    } else {\n      thumbnailUrl = itemObj.thumbnailUrl ? itemObj.thumbnailUrl : attachmentUrl;\n    }\n\n    const newItemObj = {\n      title: title,\n      date: date,\n      lowestTemp: low,\n      highestTemp: high,\n      text: item,\n      tags: tags,\n      createdAt: itemObj.createdAt,\n      creatorId: itemObj.creatorId,\n      attachmentUrl,\n      thumbnailUrl,\n    };\n\n    await dbService.doc(`items/${itemId}`).update(newItemObj);\n    alert(\"수정 완료!\");\n    navigate(`/${itemId}`);\n  };\n\n  async function handleImageUpload(event) {\n\n    let imageFile = event.target.files[0];\n    console.log(`originalFile size ${imageFile.size / 1024 / 1024} MB`);\n    if (imageFile.name.indexOf('.') > 0) {\n      let ext = imageFile.name.split('.');\n      setExt(ext[ext.length - 1]);\n    } \n\n    const options = {\n      maxSizeMB: 1,\n      maxWidthOrHeight: 1000,\n      useWebWorker: true,\n      initialQuality: 0.7\n    }\n    try {\n      const compressedFile = await imageCompression(imageFile, options);\n      console.log(`compressedFile size ${compressedFile.size / 1024 / 1024} MB`);\n      const reader = new FileReader();\n      reader.onloadend = (finishedEvent) => {\n        const {\n          currentTarget: { result },\n        } = finishedEvent;\n        setAttachment(result);\n\n        console.log('Create Thumbnail');\n        // create thumbnail\n        const width = 300;\n        const height = 300;\n        const image = new Image();\n        image.width = width;\n        image.height = height;\n        image.title = 'thumbnail';\n        image.src = result;\n\n        image.onload = function () {\n          const canvas = document.createElement(\"canvas\");\n          canvas.width = width;\n          canvas.height = height;\n          canvas.getContext(\"2d\").drawImage(image, 0, 0, width, height);\n          const dataUri = canvas.toDataURL(\"image/webp\", 0.7);\n          setThumbnail(dataUri);\n          const thumb = new Image();\n          thumb.src=dataUri;\n          document.getElementById('thumbnail').appendChild(thumb);\n        }\n      };\n      reader.readAsDataURL(compressedFile);\n    } catch (error) {\n      console.log(error);\n    }\n  \n  }\n\n  const onClearAttachment = () => setAttachment(\"\");\n  const onDeleteClick = async () => {\n    const ok = window.confirm(\"삭제하시겠습니까?\");\n    if (ok) {\n      await dbService.doc(`items/${itemId}`).update({\n        attachmentUrl: \"\",\n        thumbnailUrl: \"\",\n      });\n      await storageService.refFromURL(itemObj.attachmentUrl).delete();\n      await storageService.refFromURL(itemObj.thumbnailUrl).delete();\n      alert(\"사진 삭제 완료!\");\n      navigate(`/write/${itemId}`);\n    }\n  };\n\n  const onClickTags = () => {\n    if (item === \"\") return;\n    const start = item.indexOf(\"#\");\n    const tagsOriginal = item.substring(start);\n    const result = splitTags(tagsOriginal);\n    setTags(result);\n  };\n\n  function splitTags(tagsString) {\n    let result = tagsString.replaceAll(\"<p>\", \"\");\n    result = result.replaceAll(\"</p>\", \"\");\n    result = result.replaceAll(\"#\", \"\");\n    result = result.split(\" \");\n    return result;\n  }\n\n  return (\n    <form onSubmit={onSubmit} className=\"factoryForm\">\n      <div className=\"factoryInput__container\">\n        <div className=\"factoryInput__title\">\n          <input\n            className=\"factoryInput__Input\"\n            value={title}\n            onChange={onTitleChange}\n            type=\"text\"\n          />\n          <input\n            className=\"factoryInput__Input\"\n            value={date}\n            onChange={onDateChange}\n            type=\"date\"\n          />\n          <input\n            className=\"factoryInput__Input\"\n            value={low}\n            placeholder=\"최저기온\"\n            onChange={onLowChange}\n            type=\"number\"\n          />\n          <input\n            className=\"factoryInput__Input\"\n            value={high}\n            placeholder=\"최고기온\"\n            onChange={onHighChange}\n            type=\"number\"\n          />\n        </div>\n\n        <CKEditor\n          editor={ClassicEditor}\n          data={itemObj.text}\n          onChange={(event, editor) => {\n            const data = editor.getData();\n            setItem(data);\n          }}\n        />\n        <div className=\"factoryInput__tag\">\n          <input\n            className=\"commonBtn formBtn\"\n            onClick={onClickTags}\n            value=\"Tag 불러오기\"\n            type=\"button\"\n          />\n          {tags.map((tag) => (\n            <span className=\"formBtn tagBtn\">{tag}</span>\n          ))}\n        </div>\n        <div className=\"submitBtns\">\n          <input\n            id=\"news-submit\"\n            type=\"submit\"\n            value=\"&rarr;\"\n            style={{ opacity: 0 }}\n          />\n          <label htmlFor=\"news-submit\" className=\"factoryInput__arrow\">\n            수정\n          </label>\n        </div>\n      </div>\n      <label htmlFor=\"attach-file\" className=\"factoryInput__label\">\n        <span>사진 첨부</span>\n        <FontAwesomeIcon icon={faPlus} />\n      </label>\n      <input\n        id=\"attach-file\"\n        type=\"file\"\n        accept=\"image/*\"\n        onChange={handleImageUpload}\n        style={{ opacity: 0 }}\n      />\n      <div className=\"factoryForm__attachment\">\n        {attachment && (\n          <>\n            <img\n              src={attachment}\n              style={{ backgroundImage: attachment }}\n              alt={itemObj.title}\n            />\n            <div className=\"factoryForm__clear\" onClick={onClearAttachment}>\n              <span>사진 삭제</span>\n              <FontAwesomeIcon icon={faTimes} />\n            </div>\n          </>\n        )}\n        {itemObj.attachmentUrl && (\n          <>\n            <img src={itemObj.attachmentUrl} alt={itemObj.title} />\n            <div className=\"factoryForm__clear\" onClick={onDeleteClick}>\n              <span>기존 사진 삭제</span>\n              <FontAwesomeIcon icon={faTimes} />\n            </div>\n          </>\n        )}\n      </div>\n    </form>\n  );\n};\n\nexport default ItemFactoryEdit;\n","import ItemFactory from \"components/ItemsFactory\";\nimport ItemFactoryEdit from \"components/ItemsFactoryEdit\";\nimport { useParams } from \"react-router-dom\";\n\nconst Write = ({ userObj }) => {\n  let { id } = useParams();\n\n  return (\n    <section className=\"wrapContainer dark\">\n      <div className=\"container\">\n        {id ? (\n          <>\n            <h2>글 수정하기</h2>\n            <ItemFactoryEdit userObj={userObj} itemId={id} />\n          </>\n        ) : (\n          <>\n            <h2>새 글 등록하기</h2>\n            <ItemFactory userObj={userObj} />\n          </>\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default Write;\n"],"names":["userObj","today","Date","offset","getTimezoneOffset","defaultToday","getTime","toISOString","split","useEffect","setDate","navigate","useNavigate","useState","title","setTitle","date","low","setLow","high","setHigh","item","setItem","tags","setTags","attachment","setAttachment","thumbnail","setThumbnail","ext","setExt","onSubmit","event","preventDefault","attachmentUrl","thumbnailUrl","attachmentRef","storageService","child","uid","uuidv4","putString","response","ref","getDownloadURL","thumbnailRef","itemObj","lowestTemp","highestTemp","text","createdAt","creatorId","dbService","add","docRef","alert","id","imageFile","target","files","console","log","size","name","indexOf","length","options","maxSizeMB","maxWidthOrHeight","useWebWorker","initialQuality","imageCompression","compressedFile","reader","FileReader","onloadend","finishedEvent","result","currentTarget","image","Image","width","height","src","onload","canvas","document","createElement","getContext","drawImage","dataUri","toDataURL","thumb","getElementById","appendChild","readAsDataURL","className","value","onChange","type","placeholder","CKEditor","editor","ClassicEditor","data","getData","onClick","start","tagsString","replaceAll","splitTags","substring","map","tag","style","opacity","htmlFor","icon","faPlus","accept","backgroundImage","alt","faTimes","itemId","setItemObj","get","then","doc","newItemObj","update","onDeleteClick","window","confirm","delete","useParams"],"sourceRoot":""}